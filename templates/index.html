<!DOCTYPE html>
<html>
<head>
<style>
	  form {
	    display: grid;
	    grid-template-columns: 1fr 1fr 1fr 1fr;
	    grid-gap: 10px;
	    align-items: right;
	    margin-right: 10px;
	  }

	  label, input {
	    margin: 5px 0;
	    width: 200px;
            height: 40px;
            font-size: 20px;
	  }

	  input[type="submit"] {
	    width: auto;
	  }
	  .form-container {
	    max-width: 60px;
	  }



</style>
	<title>My Flask App</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
$(document).ready(function() {
  // Attach event listener to the form input fields
  $("input[name='stop'], input[name='target'], input[name='Rmultiple']").on("input", function() {
    // Create an object to hold the form data
    var formData = {
      "stop": $("input[name='stop']").val(),
      "target": $("input[name='target']").val(),
      "Rmultiple": $("input[name='Rmultiple']").val()
    };

    // Send the form data to the Flask server using an AJAX request
    $.ajax({
      type: "POST",
      url: "/calculate_entry",
      contentType: "application/json", // Set the content type to JSON
      data: JSON.stringify(formData), // Convert the form data to a JSON object
      success: function(response) {
        // Update the calculated entry value in the HTML
        $("#value").val(response["value"]);
      }
    });
  });
    // Set the default value for Rmultiple
    $("input[name='Rmultiple']").val({{ default_Rmultiple }});
});
</script>

</head>
<body>
	<h1>Trade-Generator</h1>
	<div class="form-container">
	<form id="entry-form">
		<label for="Rmultiple">R-Multiple:</label>
		<input type="number" name="Rmultiple" id="Rmultiple" step="0.1" required value="{{ request.form.get('Rmultiple', default_Rmultiple) }}">

		<label for="stop">Stop:</label>
		<input type="number" name="stop" id="stop" step="0.25" required value="{{ request.form.get('stop', '') }}">

		<label for="target">High Probability Target:</label>
		<input type="number" name="target" id="target" step="0.25" required value="{{ request.form.get('target', '') }}">
		<label for="target">High Probability Target contracts:</label>
		<input type="number" name="targetCont" id="targetCont" step="1" required value="{{ request.form.get('targetCont', '') }}">

		<label for="target">1R Scale Target:</label>
		<input type="number" name="scaletarget" id="scaletarget" step="0.25" required value="{{ request.form.get('scaletarget', '') }}">
		<label for="target">1R Scale Target contracts:</label>
		<input type="number" name="scaletargetCont" id="scaletargetCont" step="1" required value="{{ request.form.get('scaletargetCont', '') }}">

		<label for="entry-value">Calculated Entry:</label>
		<input type="number" name="entry" id="value" step="0.25" value="{{ value }}">

		<input type="submit" value="Calculate Entry">
	</form>
	</div>

	<br><br><br><br>
	<a href="/config">Configure Settings</a>

</body>
</html>

